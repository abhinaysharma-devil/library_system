<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <!-- <script src="/firebase-messaging-sw.js"></script> -->

    <!-- <script>
    if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/firebase-messaging-sw.js')
      .then(function(registration) {
        console.log('Registration successful, scope is:', registration.scope);
      }).catch(function(err) {
        console.log('Service worker registration failed, error:', err);
      });
    }
</script> -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";
        import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-messaging.js";

        const firebaseConfig = {
            apiKey: process.env.API_KEY,
  authDomain: process.env.AUTH_DOM,
  projectId: "dooms-library",
  storageBucket: "dooms-library.appspot.com",
  messagingSenderId: process.env.M_ID,
  appId: process.env.APP_ID,
  measurementId: process.env.M_ID
        };

        const app = initializeApp(firebaseConfig);
        const messaging = getMessaging(app);


        document.getElementById('click-btn').addEventListener('click', function requestPermission() {
            console.log('Requesting permission...');
            Notification.requestPermission().then((permission) => {
                if (permission === 'granted') {
                    console.log('Notification permission granted.');

                //     messaging.getToken({ vapidKey: "BMhe9wwm915s3IV6_w1jpnmyHXpPMsixfLXRX5js7x-79B0XM5maVVLsEDHkASWvs8v6AWDbbIVF-fVLL0imToc" }).then((current) => {

                //     })


                //     getToken(messaging, { vapidKey: 'BMhe9wwm915s3IV6_w1jpnmyHXpPMsixfLXRX5js7x-79B0XM5maVVLsEDHkASWvs8v6AWDbbIVF-fVLL0imToc' }).then((currentToken) => {
                //         if (currentToken) {

                //             console.log(currentToken)

                //         }
                //     })
                //      else {

                //         console.log('No registration token available. Request permission to generate one.');
                //         // ...
                //     }
                // })
                // .catch((err) => {
                //     console.log('An error occurred while retrieving token. ', err);
                // });


            

            }
            })
        })

    </script>
    <button id="click-btn">click</button>

</body>

</html>